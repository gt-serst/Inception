version: '3'

services:
    nginx:
        build:
            context: .
            dockerfile: requirements/nginx/Dockerfile
        container_name: nginx
#       depends_on:
#           - wordpress
        ports:
           - "443:443"
        volumes:
            - ./requirements/nginx/conf/:/etc/nginx/conf.d/
            - ./requirements/nginx/tools:/etc/nginx/ssl/
            - /home/${USER}/simple_docker_nginx_html/public/html:/var/www/
        restart: always

    mariadb:
        build:
            context: .
            dockerfile: requirements/mariadb/Dockerfile
            args:
                DB_NAME: "mariadb"
                DB_USER: "gt-serst"
                DB_PASS: "mariadbuser"
                DB_ROOT: "mariadbroot"
        container_name: mariadb
        ports:
            - "3306:3306"
        volumes:
            - ./requirements/mariadb/conf/:/etc/mysql/mariadb.cnf
            - mariadb:/var/lib/mysql
        restart: always

volumes:
  mariadb:
    # driver: local
    # driver_opts:
    # type: 'none'
    # o: 'bind'
